<html>
<head>
<link rel="stylesheet" type="text/css" href="scripts/datatables.css"/>
<script type="text/javascript" src="scripts/datatables.min.js"></script>
<style>
#overlay {
    position: absolute;
    display: none;
    width: 100%;
    height: 100%;
    top: 50%;
    left: 50%;
    right: 0;
    bottom: 0;
    background-color: white; 
    z-index: 2;
    cursor: pointer;
}
</style>
</head>
<body>
<script>

var openFile = function(event) {
    var input = event.target;

    var reader = new FileReader();
    reader.onload = function(){
      var $table = $("#results");
      var text = reader.result;
      
        text.split("\n").forEach(function(row,rowIndex){
           if(row.length<5){
               return;
           }
          
           var $line = $("<tr></tr>")     
            row.split("\t").forEach(function(col,colIndex){
                $line.append($("<td></td>").html(col))
            });
            /*if(rowIndex==0){
                var $linenew= $("<thead></thead>");

            }*/
            /*else{
                var $linenew= $("<tbody></tbody>");
            }*/
          //      $linenew.append($line);
           //     $line=$linenew;*/


            $table.append($line)
        });
        //$table.appendTo($("#results"));
        
        $table.prepend('<thead></thead>')
        $table.find('thead').append($table.find("tr:eq(0)"));
        $table.appendTo(document.body);
        $table.DataTable({
            colReorder: true,
            dom: 'Bfrtip',
            buttons: [ 'copy'],
            paging:         false,
            scrollY:        300,
            scrollX:        true,
            scrollCollapse: true,
            fixedColumns:   true,
            keys:           true

        });


         
      $('#results tbody').on('click', 'tr', function () {
        var  table =  $('#results').DataTable();
        fname=table.row(this).data()[1] + "\\" + table.row(this).data()[0] + "_thumb.png";
        $("#overlay_image")[0].src=fname;
        overlay_on();
    } );


    };
        reader.readAsText(input.files[0]);
 };



function overlay_on() {
    document.getElementById("overlay").style.display = "block";
}

function overlay_off() {
    document.getElementById("overlay").style.display = "none";
}


</script>


<input type='file' accept=".tsv" onchange='openFile(event)'><br>


<div id="overlay" onclick="overlay_off()">
  <div id="img"><img id="overlay_image" src=""></div>
</div>

<table id='results' class='display' width='10000px'><tbody></tbody></table>

</body>
</html>
